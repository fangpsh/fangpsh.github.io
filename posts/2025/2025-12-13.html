<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <title>Authentik é›†æˆåä¸ºäº‘è®¤è¯ç™»å½• - fangpsh's blog</title>
        <meta charset="utf-8" />
        <meta name="google-site-verification" content="CbsgsM2tKx2Ho07c_HkPj2MvG1zaj2trcjW7Ed1pyMw" />
        <link href="https://fangpsh.github.io/theme/static/css/bootstrap-3.0.0.min.css" rel="stylesheet" />
        <link href="https://fangpsh.github.io/theme/static/css/han.min.css" rel="stylesheet" /> 
        <link href="https://fangpsh.github.io/theme/static/css/style.css" rel="stylesheet" />
        <link href="https://fangpsh.github.io/theme/static/css/code.css" rel="stylesheet" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="fangpsh" />
<meta name="keywords" content="authentik" />
<meta name="description" content="æŠŠå‡ ä¸ªäº‘éƒ½å¯¹æ¥å®Œäº†ï¼Œéœ€è¦ä¸ºåä¸ºäº‘å•ç‹¬å†™ä¸€ç¯‡æ–‡ç« ï¼Œå› ä¸ºå®ƒä¸å¤ªä¸€æ ·ï¼Œâ€œé¥é¥é¢†å…ˆâ€ã€‚ ç¬¬ä¸€ä¸ªä¸åŒç‚¹ï¼Œåä¸ºäº‘æ²¡æœ‰è§’è‰²çš„æ¦‚å¿µï¼Œéœ€ â€¦" />

        <link href="https://fangpsh.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="fangpsh's blog Full Atom Feed" />
    </head>

    <body id="index" class="archive">
        <div class="container">
            <div class="header">
                <ul class="nav nav-pills pull-right">
                    <li class=""><a href="/">Home</a></li>
                    <li><a href="https://fangpsh.github.io/pages/about.html">About</a></li>
                    <li><a href="https://fangpsh.github.io/archives.html">Archives</a></li>
                </ul>
                <h3 class="text-muted"><a href="/">fangpsh's blog</a></h3>
				<h2 class="text-muted"></h2>
             </div>
<section id="content" class="article content">
  <header>
    <h2 class="entry-title">
      <a href="https://fangpsh.github.io/posts/2025/2025-12-13.html" rel="bookmark"
         title="Permalink to Authentik é›†æˆåä¸ºäº‘è®¤è¯ç™»å½•">Authentik é›†æˆåä¸ºäº‘è®¤è¯ç™»å½•</a></h2>
 
  </header>
  
  <div id="toc">
  </div>     
  <div id="article-content" class="entry-content">
    <p>æŠŠå‡ ä¸ªäº‘éƒ½å¯¹æ¥å®Œäº†ï¼Œéœ€è¦ä¸ºåä¸ºäº‘å•ç‹¬å†™ä¸€ç¯‡æ–‡ç« ï¼Œå› ä¸ºå®ƒä¸å¤ªä¸€æ ·ï¼Œâ€œé¥é¥é¢†å…ˆâ€ã€‚</p>
<p>ç¬¬ä¸€ä¸ªä¸åŒç‚¹ï¼Œåä¸ºäº‘æ²¡æœ‰è§’è‰²çš„æ¦‚å¿µï¼Œéœ€è¦é…ç½®ä¸€ä¸ªèº«ä»½è½¬æ¢è§„åˆ™ï¼Œå°†SAMLå¸¦è¿‡æ¥çš„è§’è‰²è½¬æ¢ä¸ºåä¸ºäº‘çš„ç”¨æˆ·ç»„ã€‚<a href="https://support.huaweicloud.com/usermanual-iam/iam_08_0006.html">è½¬æ¢è§„åˆ™</a>çœ‹èµ·æ¥è®¾è®¡çš„å¾ˆå¼ºå¤§ï¼Œå®é™…æ²¡å•¥ç”¨ï¼Œå¾’è´¹å¿ƒæ™ºã€‚</p>
<p>å¦‚æœæœ‰ç½‘å‹æ‡’å¾—çœ‹è§„åˆ™ï¼Œå¯ä»¥ç›´æ¥æŠ„è¿™ä¸ªï¼š</p>
<div class="highlight"><pre><span></span><code>[
          {
                    &quot;remote&quot;: [
                              {
                                        &quot;type&quot;: &quot;http://schemas.goauthentik.io/2021/02/saml/username&quot;
                              },
                              {
                                        &quot;type&quot;: &quot;huaweiIAMGroupName&quot;
                              }
                    ],
                    &quot;local&quot;: [
                              {
                                        &quot;user&quot;: {
                                                  &quot;name&quot;: &quot;{0}&quot;
                                        }
                              },
                              {
                                        &quot;groups&quot;: &quot;{1}&quot;
                              }
                    ]
          }
]
</code></pre></div>

<p>type: http://schemas.goauthentik.io/2021/02/saml/username å¯ä»¥æ”¹æˆä½ è‡ªå®šä¹‰çš„RoleSessionName Attribute Nameã€‚è¿™å°±å¼•å‡ºç¬¬äºŒä¸ªä¸åŒç‚¹äº†ã€‚</p>
<p>ç¬¬äºŒä¸ªä¸åŒç‚¹ï¼Œå®ƒæ²¡æœ‰ç±»ä¼¼å…¶ä»–äº‘çš„æ˜¾å¼RoleSessionNameï¼Œéœ€è¦ä½ è‡ªå®šä¹‰ï¼Œä¹ æƒ¯ä¸€ä¸‹ã€‚</p>
<p>ç¬¬ä¸‰ä¸ªä¸åŒç‚¹ï¼Œå¦‚æœä½ çš„ç”¨æˆ·æœ‰å¤šä¸ªè§’è‰²ï¼Œæ¯ä¸ªè§’è‰²éƒ½ä¸ä¸€æ ·ï¼Œåä¸ºäº‘æ˜¯å°†æ‰€æœ‰è§’è‰²è½¬æ¢ä¸ºç»„ï¼Œç„¶åå°†ç»„æƒé™åšå¹¶é›†ã€‚æ˜¯çš„ï¼Œç›®å‰æ²¡æ³•é€‰æ‹©ç‰¹å®šè§’è‰²ç™»å½•ã€‚å‡ å¹´å‰åœ¨ç”¨shibbolethåšç¬¬ä¸€ç‰ˆIdPçš„æ—¶å€™åé¦ˆè¿‡ï¼Œæ²¡ç†æˆ‘ã€‚è¿™æ¬¡å’Œå”®åæ‹‰ç ”å‘ä¸Šä¼šåé¦ˆäº†ï¼Œè¯´ä¼šå®‰æ’ã€‚ä½†æ˜¯åæ¥åˆè¯´ä¸åšäº†ï¼Œç»™äº†ä¸€ä¸ª<a href="https://support.huaweicloud.com/productdesc-identitycenter/iic_01_0002.html">æ–°æ–¹æ¡ˆ</a>ï¼Œ<a href="https://bbs.huaweicloud.com/blogs/429838">IAMèº«ä»½ä¸­å¿ƒå¦‚ä½•å¯¹æ¥Okta
</a>çœ‹å¾—æˆ‘å¤´å¤§ï¼Œå…ˆä¸æäº†ã€‚å‡‘åˆç”¨å§ï¼Œæœ‰å…´è¶£çš„ç½‘å‹å¯ä»¥è¯•ä¸€è¯•ã€‚ä¼°è®¡ç°åœ¨ç»´æŠ¤çš„ç ”å‘ä¹Ÿæ˜¯åœ¨ç»´æŠ¤å†å²é¡¹ç›®ï¼Œä¸æƒ³åŠ¨ğŸ’©â›°ã€‚</p>
<p>ç¬¬å››ä¸ªä¸åŒç‚¹ï¼Œä»ç»Ÿä¸€è®¤è¯IAMå‘èµ·ç™»å½•ï¼Œå’Œä»IdPå‘èµ·ç™»å½•ä¼šå†²çªã€‚å‰è€…ç™»å½•ä¹‹åå†™å…¥çš„cookies ä¼šå¯¼è‡´IdPå‘èµ·çš„ç™»å½•å‡ºé”™ï¼ŒæœåŠ¡ç«¯è¿”å›ï¼š</p>
<div class="highlight"><pre><span></span><code>The application has malfunctioned.
Please contact technical support to solve this issue.
Error code: E0019
Error message: No InResponseTo attribute in SAMLResponse, please troubleshoot on IdP side
</code></pre></div>

<p>ä¹Ÿå°±æ˜¯åªèƒ½äºŒé€‰ä¸€ï¼Œå’Œå”®ååé¦ˆäº†è¯´ä¼šä¿®ï¼Œä»Šå¤©é—®äº†ä¸‹è¯´å‘å¸ƒé‡åˆ°bugåˆå›é€€äº†ï¼Œä¸çŸ¥é“å•¥æ—¶å€™èƒ½ä¿®å¥½ã€‚</p>
<p>ç¬¬äº”ä¸ªä¸åŒç‚¹ï¼Œå¦‚æœä½ åœ¨åŒä¸ªå‚å•†æœ‰å¤šä¸ªä¸»ä½“è´¦å·ï¼Œåœ¨å…¶ä»–äº‘å¯ä»¥ä¼ é€’å¤šä¸ªarnæ‹¼å‡‘èµ·æ¥ï¼Œç™»å½•ä¹‹åäº‘å‚å•†ä¼šåˆ—å‡ºå¤šä¸ªä¸»ä½“è´¦å·ä¸‹ä¸åŒè§’è‰²ä¾›ä½ é€‰æ‹©ã€‚åä¸ºäº‘çš„huaweiIAMGroupName å±æ€§å’Œå…¶ä»–å‚å•†çš„ä¸ä¸€æ ·ï¼Œä¸æºå¸¦account ä¿¡æ¯ï¼Œä»<a href="https://bbs.huaweicloud.com/blogs/266721">è¿™ç¯‡æ–‡ç« </a>é‡Œçœ‹åˆ°ä¸€ä¸ªå‚æ•°ï¼š<code>IAM_SAML_Attributes_identityProviders</code>ï¼Œåˆ›å»ºä¸€ä¸ªSAML Provider Property Mappingï¼Œå¯ä»¥è¾¾åˆ°ç±»ä¼¼æ•ˆæœï¼Œè¿”å›æ ¼å¼å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre><span></span><code>return [ &quot;iam::{domain_id_1}:identityProvider:{idp_id_1}&quot;,
         &quot;iam::{domain_id_2}:identityProvider:{idp_id_2}&quot;,
         &quot;iam::{domain_id_3}:identityProvider:{idp_id_3}&quot;]
</code></pre></div>

<p>å‡‘åˆç”¨å§ã€‚</p>
  </div><!-- /.entry-content -->
   <footer class="post-info text-muted">
    Posted on <abbr class="published" title="2025-12-23T00:00:00+08:00">
      Tue 23 December 2025
    </abbr>
    <address class="vcard author">
      by <a class="url fn" href="https://fangpsh.github.io/author/fangpsh.html">fangpsh</a>
    </address> in <a href="https://fangpsh.github.io/category/2025.html">2025</a> Tagged <a href="https://fangpsh.github.io/tag/authentik.html">authentik </a>
  </footer>
<!-- /.post-info -->
</section>
    <script src="https://fangpsh.github.io/theme/static/js/toc.js" type="text/javascript"></script>
            <footer id="contentinfo" class="footer">
                    <nav class="pull-right bottom-nav">
                        <a href="https://fangpsh.github.io/feeds/all.atom.xml">RSS</a>
                    </nav>
                    <address id="about" class="vcard body">
                    &copy; <a href="https://fangpsh.github.io">fangpsh's blog</a> Proudly powered by <a href="http://getpelican.com/">Pelican</a>
                    </address><!-- /#about -->
            </footer><!-- /#contentinfo -->
        </div><!-- container -->
    <script src="https://fangpsh.github.io/theme/static/js/han.min.js" type="text/javascript"></script>

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-5X2BSH52P0"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-5X2BSH52P0');
    </script>

    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
            })(window, document, "clarity", "script", "jt8984mtdg");
    </script>
    </body>
</html>